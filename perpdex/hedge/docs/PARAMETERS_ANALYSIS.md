# Delta Neutral Volume Farming Bot - νλΌλ―Έν„° λ¶„μ„

> λ¶„μ„μΌ: 2025-12-14
> λ²„μ „: 1.0.0

---

## π“ νλΌλ―Έν„° μ „μ²΄ λ©λ΅

### CLI νλΌλ―Έν„° (λ…λ Ήμ¤„μ—μ„ μ„¤μ •)

| νλΌλ―Έν„° | μ„¤λ… | κΈ°λ³Έκ°’ | νμΌ μ„μΉ |
|---------|------|--------|----------|
| `--exchange` | κ±°λμ† μ„ νƒ | ν•„μ | hedge_mode.py:22-23 |
| `--ticker` | κ±°λ μ‹¬λ³Ό | `BTC` | hedge_mode_bp.py:29 |
| `--size` | μ£Όλ¬Έλ‹Ή μλ‰ | ν•„μ | hedge_mode_bp.py:31 |
| `--iter` | λ°λ³µ νμ | ν•„μ | hedge_mode_bp.py:33 |
| `--fill-timeout` | μ²΄κ²° λ€κΈ°(μ΄) | `5` | hedge_mode_bp.py:35 |
| `--env-file` | ν™κ²½νμΌ κ²½λ΅ | `.env` | hedge_mode_bp.py:37 |

### ν™κ²½λ³€μ (.env νμΌ)

| λ³€μ | μ„¤λ… | λ―Όκ°μ •λ³΄ |
|-----|------|---------|
| `BACKPACK_PUBLIC_KEY` | Backpack API ν‚¤ | β… μ |
| `BACKPACK_SECRET_KEY` | Backpack μ‹ν¬λ¦Ώ | β… μ |
| `API_KEY_PRIVATE_KEY` | Lighter κ°μΈν‚¤ | β… μ |
| `LIGHTER_ACCOUNT_INDEX` | κ³„μ • μΈλ±μ¤ | β μ•„λ‹μ¤ |
| `LIGHTER_API_KEY_INDEX` | API ν‚¤ μΈλ±μ¤ | β μ•„λ‹μ¤ |

### ν•λ“μ½”λ”©λ κ°’ (μ½”λ“ λ‚΄ κ³ μ •)

| κ°’ | μ„¤λ… | ν„μ¬κ°’ | νμΌ μ„μΉ |
|----|------|--------|----------|
| Position diff threshold | ν¬μ§€μ… λ¶κ· ν• ν—μ©μΉ | `0.2` | hedge_mode_bp.py:1065 |
| Buy price multiplier | λ§¤μκ°€ μ΅°μ • | `0.998` (-0.2%) | hedge_mode_bp.py |
| Sell price multiplier | λ§¤λ„κ°€ μ΅°μ • | `1.002` (+0.2%) | hedge_mode_bp.py |
| Order cancel timeout | μ£Όλ¬Έ μ·¨μ† νƒ€μ„μ•„μ›ƒ | `10μ΄` | hedge_mode_bp.py:646 |
| Trading loop timeout | λ£¨ν”„ νƒ€μ„μ•„μ›ƒ | `180μ΄` | hedge_mode_bp.py |
| Max retries | μµλ€ μ¬μ‹λ„ | `15ν` | hedge_mode_bp.py |

---

## π“ νΈλ μ΄λ”© νλ¦„ λ¶„μ„

### μ „μ²΄ νλ¦„λ„

```
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”
              κ±°λ νλ¦„ (λ°λ³µ: iter νμλ§νΌ)
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”

[STEP 1] Backpack POST-ONLY BUY (μ§„μ…)
   β”‚     β””β”€ κ°€κ²©: market Γ— 0.998 (μ‹μ¥κ°€ -0.2%)
   β”‚     β””β”€ λ€κΈ°: μ²΄κ²°κΉμ§€ (10μ΄λ§λ‹¤ μ¬μ£Όλ¬Έ)
   β†“
[μ¦‰μ‹] Lighter MARKET SELL (ν—·μ§€)
   β”‚     β””β”€ λ™μΌ μλ‰ μ¦‰μ‹ μ‹¤ν–‰
   β”‚     β””β”€ Delta Neutral λ‹¬μ„±
   β†“
[STEP 2] Backpack POST-ONLY SELL (μ²­μ‚°)
   β”‚     β””β”€ κ°€κ²©: entry Γ— 1.002 (μ§„μ…κ°€ +0.2%)
   β”‚     β””β”€ λ€κΈ°: μ²΄κ²°κΉμ§€ (10μ΄λ§λ‹¤ μ¬μ£Όλ¬Έ)
   β†“
[μ¦‰μ‹] Lighter MARKET BUY (ν—·μ§€ μ²­μ‚°)
   β”‚     β””β”€ λ™μΌ μλ‰ μ¦‰μ‹ μ‹¤ν–‰
   β†“
[STEP 3] Position Reconciliation
   β”‚     β””β”€ |Backpack + Lighter| β‰¤ 0.2 ν™•μΈ
   β”‚     β””β”€ λ¶κ· ν• μ‹ μ μ‘ν• μ²­μ‚°
   β†“
[λ‹¤μ λ°λ³µ]
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”
```

### ν•µμ‹¬ νΉμ„±

| ν•­λ© | ν„μ¬ μƒνƒ | μ„¤λ… |
|-----|----------|------|
| λ°©ν–¥ | κ³ μ • (BUYβ†’SELL) | λ°©ν–¥ μ „ν™ μ—†μ, κ°™μ€ ν¨ν„΄ λ°λ³µ |
| ν™€λ”©νƒ€μ„ | μμ—° ν™€λ”© | λ¦¬λ°‹ μ¤λ” μ²΄κ²°κΉμ§€ λ€κΈ° (μ‹μ¥ λ³€λ™μ„± μμ΅΄) |
| Delta Neutral | β… κµ¬ν„λ¨ | Backpack Long + Lighter Short |
| ν¬μ§€μ… κ΄€λ¦¬ | β… κµ¬ν„λ¨ | λ¶κ· ν• 0.2 μ΄μƒ μ‹ κ²½κ³  |

---

## π’° μμµ κµ¬μ΅°

### μ¤ν”„λ λ“ λ¶„μ„

```
λ§¤μκ°€: market Γ— 0.998 (-0.2%)
λ§¤λ„κ°€: entry Γ— 1.002 (+0.2%)
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”
μ΄ μ¤ν”„λ λ“ λ§μ§„: +0.4%

μμλ£:
- Backpack Maker: -35% rebate (λ°›μ)
- Lighter: 0%
β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”β”
μμμµ: ~0.35%+ (μ¤ν”„λ λ“ + λ¦¬λ² μ΄νΈ)
```

### μμƒ μμµ ($100k κ±°λλ‰ κΈ°μ¤€)

| ν•­λ© | κΈμ•΅ |
|-----|------|
| Backpack rebate | +$350 (35%) |
| Lighter fee | $0 |
| Spread cost | -$50 (μμƒ) |
| **μμμµ** | **+$300** |

### ν¬μΈνΈ νλ“

| κ±°λμ† | ν¬μΈνΈ | λΉ„κ³  |
|-------|--------|-----|
| Lighter | ~1.4 points | $70k/point |
| Backpack | ~1,000 points | Trading volume |

---

## β οΈ λ¦¬μ¤ν¬ λ¶„μ„

### Wash Trading ν•„ν„°

**μ¶μ²**: [Backpack Exchange Trading Rules](https://support.backpack.exchange/legal/vara-disclosures/exchange-trading-rules)

- Wash tradingμ€ **λ…μ‹μ μΌλ΅ κΈμ§€**λ μ‹μ¥ μ΅°μ‘ ν–‰μ„
- νƒμ§€ μ‹ **μ§•κ³„ μ΅°μΉ** (κ³„μ • μ ν• κ°€λ¥)
- ν¬μΈνΈ μ‹μ¤ν…μ€ **κΈ°μ¤€ λΉ„κ³µκ°** (λ΄‡/νλ° λ°©μ§€)

**ν„μ¬ μ „λµμ μ•μ „μ„±**:
- β… λ¦¬λ°‹ μ¤λ”λ΅ μμ—°μ¤λ¬μ΄ ν™€λ”© λ°μƒ
- β… μ‹μ¥ λ³€λ™μ„±μ— λ”°λ¥Έ λλ¤ μ²΄κ²° μ‹κ°„
- β οΈ κ°•μ„Έμ¥μ—μ„ λΉ λ¥Έ μ²΄κ²° κ°€λ¥μ„±

### κΈ°νƒ€ λ¦¬μ¤ν¬

| λ¦¬μ¤ν¬ | μ‹¬κ°λ„ | λ€μ‘ |
|-------|--------|-----|
| λ„¤νΈμ›ν¬ μ§€μ—° | π΅ μ¤‘κ°„ | μλ™ μ¬μ‹λ„ λ΅μ§ |
| API μ¥μ•  | π”΄ λ†’μ | ν•μ½λ§ μ²΄κ²° μ‹ μλ™ κ°μ… ν•„μ” |
| μ¬λ¦¬ν”Όμ§€ | πΆ λ‚®μ | λ¦¬λ°‹ μ¤λ”λ΅ μµμ†ν™” |
| ν€λ”©λΉ„ λ„μ  | π΅ μ¤‘κ°„ | λ¨λ‹ν„°λ§ κ¶μ¥ |

---

## π“‹ κµ¬ν„ μ‘μ—… λ©λ΅

### π”΄ ν•„μ (High Priority)

| μ‘μ—… | μ„¤λ… | μƒνƒ |
|-----|------|------|
| ν„μ¬ μ μ§€ (μµμ… A) | 10μ΄ μ·¨μ† λ΅μ§ μ μ§€, λ¦¬λ°‹ μ¤λ” μμ—° ν™€λ”© | β… κ²°μ • |

### π΅ κ¶μ¥ (Medium Priority)

| μ‘μ—… | μ„¤λ… | μƒνƒ |
|-----|------|------|
| config.yaml μ§€μ› | ν•λ“μ½”λ”© κ°’ μ„¤μ • νμΌλ΅ μ΄λ™ | β³ λ€κΈ° |
| ν€λ”©λΉ„ λ¨λ‹ν„°λ§ | μ£ΌκΈ°μ  ν€λ”©λΉ„ μ²΄ν¬ λ° λ΅κΉ… | β³ λ€κΈ° |

### πΆ μ„ νƒ (Low Priority)

| μ‘μ—… | μ„¤λ… | μƒνƒ |
|-----|------|------|
| λ°©ν–¥ μ „ν™ μµμ… | `--alternate-direction` ν”λκ·Έ | β λ¶ν•„μ” |
| ν•λ“μ½”λ”© μ„¤μ •ν™” | position_diff_threshold λ“± | β³ λ‚®μ€ μ°μ„ μμ„ |

---

## π“ μ°Έκ³  μλ£

- [perp-dex-toolkit GitHub](https://github.com/earthskyorg/perp-dex-toolkit)
- [Backpack Exchange Trading Rules](https://support.backpack.exchange/legal/vara-disclosures/exchange-trading-rules)
- [Lighter Airdrop Guide](https://lighter.markets/airdrop/)
